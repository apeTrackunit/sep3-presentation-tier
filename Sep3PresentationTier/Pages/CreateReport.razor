@page "/reports/new"
@using Model
@using Services.Interfaces

@inject IReportService reportService;
@inject NavigationManager navManager;


<h2 style="text-align: center; margin-bottom: 20px">New report</h2>

<ReportComponent @bind-ViewType=ViewType @bind-Report=Report SaveReport="@SaveReport"/>



@code {
    private string ViewType = "create";
    
    public Report Report { get; set; }

    public CreateReport()
    {
        Report = new Report();
        Report.Location = new Location(1);
    }

    public async Task SaveReport(Report report)
    {
        bool confirmation = await reportService.CreateAsync(report);
        if (confirmation)
        {
            navManager.NavigateTo("/reports");   
        }
    }
}